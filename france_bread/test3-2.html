<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>candystand_test</title>
</head>
<body>
    <button onclick="CandyStand()">Take a Candy</button><br>
    <script>
        let x, y;
        let playerattack, playerdefense, playermaxhealth, playerhealth;


        let kari = {
            attack:0,
            defense:0,
            health:0
        }

        y = [1];
        function CandyStand() {
            x = Math.floor(Math.random() * 20) + 1;
            if (!y.includes(x)) {
                y.push(x);
                Candycorrect();
            } else {
                y = [1];
                Candymissed();
            }
        }
        
        function Candycorrect(){
            x = Math.floor(Math.random() * 3)+1;
            switch(x){
                case 1:
                    kari.attack += Math.floor(Math.random() * 8) + 5;if(playerattack < 1){playerattack = 1};
                    break;
                case 2:
                    kari.defense += Math.floor(Math.random() * 4) + 3;if(playerdefense < 0){playerdefense = 0};
                    break;
                case 3:
                    kari.health += Math.floor(Math.random() * 11) + 10;if(playermaxhealth < 1){playermaxhealth = 1};
                    break;
            }
        }
        function Candymissed(){
            x = Math.floor(Math.random() * 3)+1;
            switch(x){
                case 1:
                    playerattack -= Math.floor(Math.random() * 8) + 5;if(playerattack < 1){playerattack = 1};
                    break;
                case 2:
                    playerdefense -= Math.floor(Math.random() * 4) + 3;if(playerdefense < 0){playerdefense = 0};
                    break;
                case 3:
                    playermaxhealth -= Math.floor(Math.random() * 11) + 10;if(playermaxhealth < 1){playermaxhealth = 1};
                    if(playerhealth > playermaxhealth){playerhealth = playermaxhealth};
                    break;
            }
            kari.attack = 0; kari.defense = 0; kari.health = 0;
        }
    </script>
</body>
</html>
